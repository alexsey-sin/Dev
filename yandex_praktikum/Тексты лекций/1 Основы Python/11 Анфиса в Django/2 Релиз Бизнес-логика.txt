Релиз: Бизнес-логика

План таков: посетитель сайта укажет имя друга и сорт мороженого, а Анфиса

    найдёт этого друга в базе,
    узнает его город,
    обратится к сервису погоды и узнает температуру в этом городе.

После этого Анфиса вернёт результат:

    сорт мороженого,
    имя и город друга
    рекомендацию, зависящую от погоды: съесть ли мороженое сейчас или приберечь его
	на более жаркий день.

Получить название города по имени друга несложно: нужно запросить значение того
элемента словаря, ключ которого — запрошенное имя: city = friends_db[friend_name].
Функцию по определению погоды в городе по его названию вы уже написали в курсе по
Python, она никуда не пропала:

	def what_weather(city):
		url = f'http://wttr.in/{city}'
		weather_parameters = {
			'format': 2,
			'M': ''
		}
		try:
			response = requests.get(url, params=weather_parameters)
		except requests.ConnectionError:
			return '<сетевая ошибка>'
		if response.status_code == 200:
			return response.text.strip()
		else:
			return '<ошибка на сервере погоды. попробуйте позже>' 

В приложении anfisa создан файл services.py (англ. «услуги»): в нём будут
храниться все служебные функции. Функция what_weather() полностью отвечает
понятию «служебная функция», сразу поместим её в этот файл.

	├── anfisa4friends
	│   ├── settings.py
	│   └── urls.py
	├── anfisa
	│   ├── services.py
	│   └── models.py 
	├── icecream
	│   ├── models.py  
	│   ├── views.py
	│   └── urls.py
	├── homepage
	│   ├── views.py
	│   └── urls.py
	├── templates  
	│   ├── icecream
	│   │   └── icecream-detail.html
	│   └── homepage
	│       └── homepage.html
	└── manage.py
 

Проверим, как Анфиса прижилась в проекте и не растеряла ли свои навыки.

===============================================================================
Тренажер - проект

Задача:

В дополнение к имени друга выведите на главную страницу проекта его город и погоду
в этом городе.

Импортируйте функцию what_weather() в файл homepage/views.py.

В файле homepage/views.py в функции index() измените цикл, возвращающий
список друзей.

Для каждого друга

    Получите название его города.
    
	Название города передайте в функцию what_weather() и получите информацию
	о погоде.
    
	Измените строку, которая получается в результате: вместо имени друга
	выведите текст в формате Имя :: Город :: Погода

А больше ничего не нужно: словарь context и вывод в шаблон у вас уже настроены!

Подсказка:

    Импорт — это просто: from папка.имя_файла import имя_функции
    
	Название города — это значение элемента словаря, где ключ — имя друга:
	friends_db[имя_друга]
    
	Собрать строку из переменных и текстовых символов лучше всего через f-строку:
    
	f'{имя} :: {город} :: {погода}'. Проверьте, что в конце стоит HTML-тег
	разрыва строки, а то на странице всё слипнется.

Проект в папке project_2
===============================================================================
